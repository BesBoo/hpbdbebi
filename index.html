<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        emailjs.init('hlVOsu7aNJAlx2UKB'); // Thay b·∫±ng public key c·ªßa b·∫°n
    </script>

    <title>S√°ch Ch√∫c M·ª´ng Sinh Nh·∫≠t</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Times New Roman', sans-serif;
            background: url('background2.png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }


        /* Password Modal */
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:url('background.png') no-repeat center center fixed;
            background-size: 100% 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .password-box {
            background: rgba(116, 116, 116, 0); 
            backdrop-filter: blur(4px); 
            -webkit-backdrop-filter: blur(15px);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 90%;
            width: 400px;
        }

        .password-box h2 {
            color:#ffc9df;
            -webkit-text-stroke: 1px #c04a93;
            margin-bottom: 20px;
            font-size: clamp(1.5rem, 4vw, 2rem);
        }

        .password-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #f8bbd9;
            border-radius: 10px;
            font-size: 18px;
            text-align: center;
            margin-bottom: 20px;
            background: rgb(255, 255, 255);
            outline: none;
            transition: all 0.3s ease;
        }

        .password-input:focus {
            border-color: rgb(255, 201, 239);
            box-shadow: 0 0 15px 6px rgb(255, 201, 239),  
                        0 0 25px 10px rgb(251, 196, 218);
        }

        .submit-btn {
            background: linear-gradient(to left, #fcb6ccc2, #c0e7ffcb);
            color: #C2185B;
            border: 2px solid rgba(220, 249, 255, 0.649);
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .submit-btn:hover {
            background: linear-gradient(to left, #faacc7, #a7dcff);
            border: 2px solid rgb(175, 239, 254);
            transform: translateY(-2px);
            box-shadow: 0 0 15px 6px rgb(192, 255, 255),  
                        0 0 25px 10px rgba(157, 214, 249, 1);
        }

        /* Book Container */
        .book-container {
            display: none;
            perspective: 1500px;
            position: relative;
        }

        .book {
            width: 750px;
            height: 500px;
            position: relative;
            transform-style: preserve-3d;
            margin: 50px;
            z-index: 10;
        }

        /* B√¨a cu·ªën s√°ch */
        .book-cover {
            position: absolute;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 10px;
            border: 2px solid rgb(255, 204, 238);
            box-shadow:  
                0 0 15px 6px rgb(255, 201, 239),
                0 10px 30px rgb(251, 196, 242),
                inset 0 2px 10px rgba(142, 227, 248, 0.1);
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 100;
        }

        .book-cover.open {
            transform: rotateY(-180deg);
        }
        .page-content.hidden {
            visibility: hidden;
        }

        /* trang b√™n trong */
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #fefefe;
            border: 1px solid #ddd;
            border-radius: 8px;
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 
                0 2px 10px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.6);
            overflow: hidden;
            backface-visibility: hidden;
        }

        .page::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(255,182,193,0.1) 0%, 
                rgba(255,182,193,0.05) 50%, 
                transparent 100%);
            pointer-events: none;
        }

        .page-content {
            padding: 40px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .page-content h1 {
            color: #ed5f9d;
            font-size: 2.5rem;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            font-family: 'Times New Roman', sans-serif;
            font-weight: bold;
            width: 100%;
            text-align: center;
        }

        .page-content h2 {
            color: #ec76bb;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-family: 'Times New Roman', sans-serif;
            width: 100%;
            text-align: center;
        }
        .page-content h3 {
            color: #4ac0f7;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-family: 'Times New Roman', sans-serif;
            width: 100%;
            text-align: center;
        }
        .page-content p {
            color: #444;
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 15px;
            max-width: 85%;
            font-family: 'Times New Roman', sans-serif;
            width: 100%;
            text-align: center;
        }

        .flipped {
            transform: rotateY(-180deg);
        }

        .page-number {
            position: absolute;
            bottom: 15px;
            right: 25px;
            color: #ad1457;
            font-size: 1rem;
            opacity: 0.7;
            font-style: italic;
        }

        /* Navigation Arrows */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(255, 134, 187, 0.8);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px 6px rgb(192, 255, 255,0.5),  
                        0 0 25px 10px rgba(157, 214, 249, 0.5);
        }

        .nav-arrow:hover {
            background: rgb(247, 110, 169);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 0 15px 6px rgb(255, 201, 239),  
                        0 0 25px 10px rgb(251, 196, 218);
        }

        .nav-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .arrow-left {
            left: -70px;
        }

        .arrow-right {
            right: -70px;
        }

        /* Choice buttons for last page */
        .choice-buttons {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content:center;
        }

        .choice-btn {
            text-align: left;
            background: #b3f0ff;
            color: rgb(121, 121, 121);
            border: 1px solid #a3edfe;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 120px;
            box-shadow: 0 0 10px 4px rgb(209, 246, 251),  
                        0 0 15px 5px rgb(205, 241, 245);
            
        }

        .choice-btn:hover {
            background: #ffd5e7;
            color: #2C3E50;
            border: 1px solid #ffa7dc;
            transform: translateY(-3px);
            box-shadow: 0 0 15px 6px rgb(255, 201, 239),  
                        0 0 25px 10px rgb(251, 196, 218);
        }

        .choice-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        /* Success message */
        .success-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            height: 150px;
            width: 300px;
            font-size: 1.3rem;
            color:black;
            transform: translate(-50%, -50%);
            background: linear-gradient(to left, #f5d6e1, #dcf1ff);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            text-align: center;
            justify-content: center;
            z-index: 1001;
            max-width: 90%;
            line-height: 100px;
        }

        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #ad1457;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Typing animation */
        .typing-text {
            opacity: 1;
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid #ad1457;
            animation: blink-cursor 1s infinite;
            width: 0;
        }

        .typing-text.active {
            animation: typewriter 0.75s steps(40, end) forwards, blink-cursor 1s infinite;
        }

        .typing-text.typing-complete {
            border-right: none;
            animation: none;
            white-space: normal;
            word-wrap: break-word;
            width: auto !important;
            overflow: visible;
        }

        @keyframes typewriter {
            from {
                width: 0;
            }
            to {
                width: 100%;
            }
        }

        @keyframes blink-cursor {
            from, to {
                border-color: transparent;
            }
            50% {
                border-color: #ad1457;
            }
        }

        /* Page curl effect */
        .page-curl {
            position: relative;
            overflow: hidden;
        }

        .page-curl::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            background: linear-gradient(225deg, transparent 45%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.2) 55%, transparent 100%);
            transition: all 0.3s ease;
        }

        .page-curl.curling::after {
            width: 50px;
            height: 50px;
            border-radius: 0 0 0 50px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .book {
                width: 90vw;
                height: 60vw;
                margin: 20px;
            }

            .nav-arrow {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .arrow-left {
                left: -50px;
            }

            .arrow-right {
                right: -50px;
            }

            .page-content {
                padding: 20px;
            }

            .page-content h1 {
                font-size: 2rem;
            }

            .page-content h2 {
                font-size: 1.5rem;
            }

            .page-content p {
                font-size: 1rem;
            }
        }
        .heart {
            width: 20px;
            height: 20px;
            background-color: pink;
            position: fixed;
            top: -10px;
            
            transform: rotate(-45deg);
            opacity: 0.5;
            pointer-events: none;
            z-index: 1;
            animation: fall linear forwards;
        }

        .heart::before,
        .heart::after {
            content: "";
            width: 20px;
            height: 20px;
            background-color: pink;
            position: absolute;
            border-radius: 50%;
        }

        .heart::before {
            top: -10px;
            left: 0;
        }
        .heart::after {
            left: -10px;
            top: 0;
        }


        @keyframes fall {
            to {
                transform: translateY(100vh) scale(0.8) rotate(45deg);
                opacity: 0;
            }
        }



    </style>
</head>
<body>
    <audio id="birthday-audio" src="assets/hpbd.mp3" preload="auto"></audio>

    <!-- Password Modal -->
    <div class="password-modal" id="passwordModal">
        <div class="password-box">
            <h2> Nh·∫≠p M·∫≠t Kh·∫©u </h2>
            <input type="text" class="password-input" id="passwordInput" placeholder="H√¥m nay l√† ng√†y m·∫•y ta ?">
            <button class="submit-btn" onclick="checkPassword()">Let's go</button>
        </div>
    </div>


    <!-- Book Container -->
    <div class="book-container" id="bookContainer">
        <div class="book" id="book">
            <!-- Navigation Arrows -->
            <button class="nav-arrow arrow-left disabled" id="leftArrow" onclick="previousPage()">
                &#8249;
            </button>
            <button class="nav-arrow arrow-right" id="rightArrow" onclick="nextPage()">
                &#8250;
            </button>

            <!-- Book Cover -->
            <div class="book-cover" id="bookCover">
                <div class="page-content">
                    <h1> Ch√∫c M·ª´ng Sinh Nh·∫≠t</h1>
                    <h3>üéâB√© bi th√∫iüéâ</h3>
                    <p> Click m≈©i th√™n b√™n ph·∫£i ƒë·ªÉ m·ªü s√°ch nho </p>


                </div>
            </div>

            <!-- Pages -->
            <div class="page" data-page="1" style="z-index: 19;">
                <div class="page-content">
                    <h1 class="typing-text" >Ch√∫c m·ª´ng sinh nh·∫≠t <br> b√© y√™u c·ªßa anh üíñ</h1>
                    <p class="typing-text">Cu·ªën s√°ch nh·ªè n√†y d√†nh ri√™ng cho b√© ƒë√≥</p>
                    <p class="typing-text">Ch√∫c b√© c√≥ m·ªôt ng√†y sinh nh·∫≠t th·∫≠t ƒë·∫∑c bi·ªát!</p>
                    <div class="page-number">1/19</div>
                </div>
            </div>

            <div class="page" data-page="2" style="z-index: 18;">
                <div class="page-content">
                    <h2 class="typing-text">üíùNg√†y C·ªßa Thi√™n Th·∫ßn</h2>
                    <p class="typing-text"> H√¥m nay l√† m·ªôt ng√†y kh√¥ng ch·ªâ ƒë·∫∑c bi·ªát,</p>
                    <p class="typing-text"> m√† c√≤n quan tr·ªçng v·ªõi anh.</p>
                    <p class="typing-text"> Ng√†y m√† v≈© tr·ª• m·ªâm c∆∞·ªùi, </p>
                    <p class="typing-text"> trao t·∫∑ng th·∫ø gian m·ªôt thi√™n th·∫ßn nh·ªè b√©,</p>
                    <p class="typing-text"> d·ªãu d√†ng v√† r·ª±c r·ª°.</p>

                    <div class="page-number">2/19</div>
                </div>
            </div>

            <div class="page" data-page="3" style="z-index: 17;">
                <div class="page-content">
                    <p class="typing-text">L√† ng√†y b√© bi c·ªßa anh c·∫•t ti·∫øng kh√≥c ch√†o ƒë·ªùi,</p>
                    <p class="typing-text">m·ªü ra m·ªôt ch∆∞∆°ng y√™u th∆∞∆°ng m·ªõi cho nh·ªØng ai bic ƒë·∫øn em</p>
                    <p class="typing-text">v√† trong ƒë√≥,</p>
                    <h3 class="typing-text">c√≥ anh.</h3>
                    <div class="page-number">3/19</div>
                </div>
            </div>

            <div class="page" data-page="4" style="z-index: 16;">
                <div class="page-content">
                    <h2 class="typing-text">üåü Ni·ªÅm Vui Tu·ªïi M·ªõi </h2>
                    <p class="typing-text">Tu·ªïi m·ªõi ƒë·∫øn r·ªìi, ch√∫c em </p>
                    <p class="typing-text">lu√¥n m·∫°nh kh·ªèe, an y√™n trong t√¢m h·ªìn,</p>
                    <p class="typing-text">xinh ƒë·∫πp r·∫°ng ng·ªùi nh∆∞ √°nh b√¨nh minh sau c∆°n m∆∞a.</p>
                    <div class="page-number">4/19</div>
                </div>
            </div>

            <div class="page" data-page="5" style="z-index: 15;">
                <div class="page-content">
                    <p class="typing-text">Anh mong t·ª´ng ng√†y em tr√¥i qua ƒë·ªÅu ng·∫≠p tr√†n ti·∫øng c∆∞·ªùi, </p>
                    <p class="typing-text">em lu√¥n ƒë∆∞·ª£c v·ªó v·ªÅ b·ªüi nh·ªØng ƒëi·ªÅu d·ªãu d√†ng</p>   
                    <p class="typing-text">nh·∫•t c·ªßa cu·ªôc s·ªëng.</p>       
                    <div class="page-number">5/19</div>
                </div>
            </div>

            <div class="page" data-page="6" style="z-index: 14;">
                <div class="page-content">
                    <h3 class="typing-text">Em bi·∫øt kh√¥ng,</h3>
                    <p class="typing-text">v·ªõi anh, em l√† ƒëi·ªÅu nhi·ªám m√†u.</p>       
                    <p class="typing-text">Anh kh√¥ng ch·ªâ mu·ªën n·∫Øm tay em <br> trong nh·ªØng ph√∫t gi√¢y r·∫°ng r·ª°,</p>       
                    <p class="typing-text">m√† c√≤n nguy·ªán c√πng em v∆∞·ª£t qua nh·ªØng ng√†y ƒë·∫ßy gi√¥ng b√£o.</p>                    
                    <div class="page-number">6/19</div>
                </div>
            </div>

            <div class="page" data-page="7" style="z-index: 13;">
                <div class="page-content">
                    <p class="typing-text">D√π l√† khi em c∆∞·ªùi ng√¢y th∆° hay khi ƒë√¥i m·∫Øt em v∆∞∆°ng bu·ªìn,</p>
                    <p class="typing-text">anh c≈©ng mu·ªën l√† ng∆∞·ªùi ·ªü c·∫°nh, l·∫Øng nghe,</p>
                    <p class="typing-text">√¥m l·∫•y em, li·∫øm l·ªó tai v√† n√≥i r·∫±ng r·∫±ng</p>
                    <h2 class="typing-text">"Anh ƒë√¢y r·ªìi, m·ªçi chuy·ªán r·ªìi s·∫Ω ·ªïn th√¥i."</h2>
                    <div class="page-number">7/19</div>
                </div>
            </div>

            <div class="page" data-page="8" style="z-index: 12;">
                <div class="page-content">
                    <p class="typing-text"> M√¨nh s·∫Ω ƒëi c√πng nhau qua nh·ªØng l·∫ßn c√£i v√£ </p>
                    <p class="typing-text"> ƒë·ªÉ hi·ªÉu nhau h∆°n </p>
                    <p class="typing-text"> v√† ƒë·ªÉ ch·∫°m v√†o h·∫°nh ph√∫c gi·∫£n ƒë∆°n.  </p>
                    <div class="page-number">8/19</div>
                </div>
            </div>
            <div class="page" data-page="9" style="z-index: 11;">
                <div class="page-content">
                    <p class="typing-text">B·ªüi t√¨nh y√™u kh√¥ng ch·ªâ l√† c·∫£m x√∫c,</p>
                    <p class="typing-text">m√† c√≤n l√† ch·ªën v·ªÅ,</p>
                    <p class="typing-text">l√† hai tr√°i tim chung nh·ªãp ƒë·∫≠p</p>
                    <div class="page-number">9/19</div>
                </div>
            </div>
            <div class="page" data-page="10" style="z-index: 10;">
                <div class="page-content">
                    <p class="typing-text">Anh kh√¥ng h·ª©a s·∫Ω l√† ng∆∞·ªùi ho√†n h·∫£o,</p>
                    <p class="typing-text">nh∆∞ng anh h·ª©a s·∫Ω l√† ng∆∞·ªùi lu√¥n ch·ªçn em m·ªói ng√†y.</p>
                    <p class="typing-text">Ch·ªçn y√™u em khi em vui,</p>
                    <p class="typing-text">v√† c·∫£ khi em m·ªát m·ªèi.</p>
                    <div class="page-number">10/19</div>
                </div>
            </div>
            <div class="page" data-page="11" style="z-index: 9;">
                <div class="page-content">
                    <p class="typing-text">Ch·ªçn ·ªü b√™n em kh√¥ng ch·ªâ m·ªôt ng√†y sinh nh·∫≠t,</p>
                    <p class="typing-text">m√† l√† tr·ªçn v·∫πn nh·ªØng nƒÉm th√°ng d√†i ph√≠a tr∆∞·ªõc.</p>
                    <div class="page-number">11/19</div>
                </div>
            </div>
            <div class="page" data-page="12" style="z-index: 8;">
                <div class="page-content">
                    <p class="typing-text">NƒÉm nay l√† anh ch√∫c sinh nh·∫≠t em</p>
                    <p class="typing-text">v√† anh mong r·∫±ng nƒÉm sau,</p>
                    <p class="typing-text">nƒÉm sau n·ªØa,</p>
                    <p class="typing-text">v√† c·∫£ khi hai ƒë·ª©a m√¨nh gi√† ƒëi,</p>

                    <div class="page-number">12/19</div>
                </div>
            </div>
            <div class="page" data-page="13" style="z-index: 7;">
                <div class="page-content">
                    <p class="typing-text">C≈©ng v·∫´n l√† anh</p>
                    <p class="typing-text">ng∆∞·ªùi √¥m em v√† n√≥i </p>
                    <h2 class="typing-text">Ch√∫c m·ª´ng sinh nh·∫≠t b√© bi.</h2>

                    <div class="page-number">13/19</div>
                </div>
            </div>
            <div class="page" data-page="14" style="z-index: 6;">
                <div class="page-content">
                    <p class="typing-text">C·∫£m ∆°n em v√¨ ƒë√£ hi·ªán di·ªán tr√™n ƒë·ªùi.</p>
                    <p class="typing-text">C·∫£m ∆°n em v√¨ ƒë√£ cho anh c∆° h·ªôi <br> y√™u em v√† ƒë∆∞·ª£c em y√™u.</p>
                    <p class="typing-text">C·∫£m ∆°n v√¨ em l√† ch√≠nh em </p>
                    <h3 class="typing-text">b√© bi th√∫i c·ªßa anh.</h3>
                    <div class="page-number">14/19</div>
                </div>
            </div>
            <div class="page" data-page="15" style="z-index: 5;">
                <div class="page-content">
                    <h2 class="typing-text">Anh y√™u em</h2>
                    <p class="typing-text">h∆°n m·ªçi l·ªùi n√≥i,</p>
                    <p class="typing-text">h∆°n m·ªçi b√†i h√°t,</p>
                    <p class="typing-text">h∆°n t·∫•t c·∫£ nh·ªØng g√¨ anh t·ª´ng bi·∫øt v·ªÅ t√¨nh y√™u.</p>
                    <div class="page-number">15/19</div>
                </div>
            </div>
            <div class="page" data-page="16" style="z-index: 4;">
                <div class="page-content">
                    <p class="typing-text">Ch√∫c em m·ªôt sinh nh·∫≠t th·∫≠t ·∫•m √°p, h·∫°nh ph√∫c </p>
                    <p class="typing-text"> v√† m·ªôt tu·ªïi m·ªõi trong ƒë·ªùi th·∫≠t ƒë·∫πp.</p>
                    <div class="page-number">16/19</div>
                </div>
            </div>
            <div class="page" data-page="17" style="z-index: 3;">
                <div class="page-content">
                    <p  id="play-music-btn" style="width: 50px; height: 50px;cursor: pointer; font-size: 50px; color:black; display: flex; align-items: center; justify-content: center;">&#9654;</p>
                    <p class="typing-text">B·∫•m n√†y ƒëi n√† </p>
                    <div class="page-number">17/19</div>
                </div>
            </div>
            <div class="page" data-page="19" style="z-index: 2;">
                <div class="page-content">
                    <p class="typing-text">Th·∫≠t bu·ªìn khi h√¥m nay kh√¥ng ƒë∆∞·ª£c b√™n em.</p>
                    <p class="typing-text">kh√¥ng th·ªÉ t·ª± tay trao em c√°i √¥m ch√∫c m·ª´ng.</p>
                    <p class="typing-text">Nh∆∞ng t√¨nh y√™u anh d√†nh cho em v·∫´n tr·ªçn v·∫πn.</p>
                    <div class="page-number">18/19</div>
                </div>
            </div>
            <div class="page" data-page="19" style="z-index: 1;">
                <div class="page-content">
                    <p class="typing-text">N·ªói nh·ªõ em c·ª© l·ªõn d·∫ßn, </p>
                    <p class="typing-text">V√† anh ch·ªâ ∆∞·ªõc,</p>
                    <p class="typing-text">gi√° nh∆∞ kho·∫£nh kh·∫Øc n√†y ƒë∆∞·ª£c n·∫Øm tay em, th√¨ t·ªët bi·∫øt m·∫•y.</p>
                    <div class="page-number">19/19</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
        
    </div>
    <script>
      
        document.addEventListener('keydown', function (e) {
            if ((e.ctrlKey && e.key === 'u') || 
                (e.ctrlKey && e.key === 's') || 
                (e.key === 'F12')) {
                e.preventDefault();
                alert('Kh√¥ng ƒë∆∞·ª£c xem m√£ ngu·ªìn nha b√© ∆°i üíªüîí');
            }
        });

        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            alert('T√≤ m√≤ chi r·ª©a!');
        });
        
        function normalizeTextContent() {
            document.querySelectorAll('*').forEach(el => {
                if (el.childNodes.length === 1 && el.childNodes[0].nodeType === 3) {
                    el.textContent = el.textContent.normalize("NFC");
                }
            });
        }

        window.addEventListener("DOMContentLoaded", normalizeTextContent);
        let currentPage = 0; 
        const totalPages = 19;
        let pages = [];
        let bookCover;
        let leftArrow, rightArrow;
        let typingAnimationInProgress = false;
        let typedPages = new Set(); 

        
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            const emailParams = {
                subject: '',
                message: ''
            };

            if (password === '1008') {
                document.getElementById('passwordModal').style.display = 'none';
                document.getElementById('bookContainer').style.display = 'block';
                initializeBook();


                emailParams.subject = ' ƒêƒÉng nh·∫≠p th√†nh c√¥ng';
                emailParams.message = 'ƒê√£ c√≥ ng∆∞·ªùi ƒëƒÉng nh·∫≠p th√†nh c√¥ng v√†o trang ch√∫c m·ª´ng sinh nh·∫≠t.';
                const audio = document.getElementById("birthday-audio");
                

            } else {
                alert('Sai m·∫•t r√≤i! ');
                document.getElementById('passwordInput').value = '';


                emailParams.subject = ' ƒêƒÉng nh·∫≠p th·∫•t b·∫°i';
                emailParams.message = 'ƒê√£ c√≥ ng∆∞·ªùi c·ªë ƒëƒÉng nh·∫≠p v√†o trang ch√∫c m·ª´ng sinh nh·∫≠t nh∆∞ng kh√¥ng th√†nh c√¥ng.';
            }


            emailjs.send('service_mzf7g9r', 'template_tg1i71h', emailParams)
                .then(function(response) {
                    console.log('Th√¥ng b√°o ƒëƒÉng nh·∫≠p ƒë√£ g·ª≠i:', response.status, response.text);
                }, function(error) {
                    console.error('L·ªói g·ª≠i th√¥ng b√°o ƒëƒÉng nh·∫≠p:', error);
                });
        }


        function initializeBook() {
            pages = document.querySelectorAll('.page');
            bookCover = document.getElementById('bookCover');
            leftArrow = document.getElementById('leftArrow');
            rightArrow = document.getElementById('rightArrow');
            
            pages.forEach(page => {
                page.style.display = 'none';
            });
            
            updateArrows();
        }

        function updateArrows() {

            if (currentPage === 0) {
                leftArrow.classList.add('disabled');
            } else {
                leftArrow.classList.remove('disabled');
            }

            if (currentPage === totalPages) {
                rightArrow.classList.add('disabled');
            } else {
                rightArrow.classList.remove('disabled');
            }
        }
        

        function nextPage() {
            if (typingAnimationInProgress || currentPage >= totalPages) return;

            if (currentPage === 0) {
                const coverContent = bookCover.querySelector('.page-content');
                if (coverContent) coverContent.classList.add('hidden');

                bookCover.classList.add('open');
                currentPage = 1;
                showPage(1);


            } else if (currentPage < totalPages) {
                const prevPageElement = pages[currentPage - 1];
                const prevContent = prevPageElement.querySelector('.page-content');
                if (prevContent) prevContent.classList.add('hidden'); // ·∫®n n·ªôi dung tr∆∞·ªõc

                prevPageElement.classList.add('flipped');
                currentPage++;
                if (currentPage <= totalPages) {
                    showPage(currentPage);
                }
            }

            updateArrows();
        }


        function previousPage() {
            if (typingAnimationInProgress || currentPage <= 0) return;

            if (currentPage === 1) {
                const coverContent = bookCover.querySelector('.page-content');
                if (coverContent) coverContent.classList.remove('hidden');

                bookCover.classList.remove('open');
                hidePage(1);
                currentPage = 0;
            } else if (currentPage > 1) {
                hidePage(currentPage);
                currentPage--;
                const pageElement = pages[currentPage - 1];
                pageElement.classList.remove('flipped');

                const content = pageElement.querySelector('.page-content');
                if (content) content.classList.remove('hidden');
            }

            updateArrows();
        }


        function showPage(pageNum) {
            const page = pages[pageNum - 1];
            page.style.display = 'block';

            const content = page.querySelector('.page-content');
            if (content) content.classList.remove('hidden');

            if (!typedPages.has(pageNum)) {
                startTypingAnimation(page, pageNum);
            }
        }


        function hidePage(pageNum) {
            const page = pages[pageNum - 1];
            page.style.display = 'none';
        }

        function startTypingAnimation(page, pageNum) {
            typingAnimationInProgress = true;
            const typingElements = page.querySelectorAll('.typing-text');
            let index = 0;


            typingElements.forEach(el => {
                el.classList.remove('active', 'typing-complete');
                el.style.width = '0';
            });

            function typeNext() {
                if (index >= typingElements.length) {
                    typingAnimationInProgress = false;
                    typedPages.add(pageNum);
                    return;
                }

                const el = typingElements[index];
                el.classList.add('active');


                const typingDuration = 1500;

                setTimeout(() => {
                    el.classList.remove('active');
                    el.classList.add('typing-complete');
                    index++;
                    typeNext(); 
                }, typingDuration);
            }

            typeNext(); 
        }


        async function sendChoice(choice, event) {
            const clickedBtn = event.target;
            const buttons = document.querySelectorAll('.choice-btn');

            const originalText = clickedBtn.innerText.trim();

            clickedBtn.disabled = true;
            clickedBtn.innerHTML = '<div class="spinner"></div>ƒêang g·ª≠i...';

            buttons.forEach(btn => {
                if (btn !== clickedBtn) btn.disabled = true;
            });

            const messageText = `L·ªãch tr√¨nh h√¥m nay: ${originalText}\n\nƒêi ƒë√≥n b√© bi th√∫i th√¥i n√†o!`;

            try {
                const result = await emailjs.send('service_mzf7g9r', 'template_tg1i71h', {
                    subject: 'Plan b√© bi ƒë√£ ch·ªçn üéâ',
                    message: messageText
                });

                console.log('EmailJS response:', result);

                const successBox = document.getElementById('successMessage');
                const message = originalText;
                successBox.innerHTML = `
                    <p>Anh bic em s·∫Ω ch·ªçn n√†y m√† m√†</p>
                    
                `;
                successBox.style.display = 'block';

                document.querySelector('.choice-buttons').style.display = 'none';
                const lastPageContent = pages[totalPages - 1].querySelector('.page-content');
                if (lastPageContent) {
                    lastPageContent.innerHTML = `
                        <h2 style="color: #ad1457; font-size: 2rem;">Gi·ªù th√¨, cbi ƒë√≥n b√© bi thoi</h2>
                        <div class="page-number">19/19</div>
                    `;
                }
                setTimeout(() => {
                    successBox.style.display = 'none';
                }, 4000);

            } catch (error) {
                console.error('L·ªói khi g·ª≠i b·∫±ng EmailJS:', error);

                const successBox = document.getElementById('successMessage');
                successBox.innerHTML = `
                    <h2>‚ùå C√≥ l·ªói x·∫£y ra</h2>
                    <p>Anh hong nh·∫≠n ƒë∆∞·ª£c th√¥ng tin r√≤i hic hic</p>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 10px;">${error.text || error.message}</p>
                `;
                successBox.style.display = 'block';

                setTimeout(() => {
                    successBox.style.display = 'none';
                    buttons.forEach((btn, index) => {
                        btn.disabled = false;
                        btn.innerHTML = index === 0 ? 'Jopi' : 'Doki';
                    });
                }, 4000);
            }
        }


        document.addEventListener('keydown', function(e) {
            if (document.getElementById('bookContainer').style.display === 'block') {
                if (e.key === 'ArrowRight' || e.key === ' ') {
                    nextPage();
                } else if (e.key === 'ArrowLeft') {
                    previousPage();
                }
            }
        });


        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.style.left = Math.random() * window.innerWidth + 'px';


            const duration = Math.random() * 3 + 3; 
            heart.style.animationDuration = duration + 's';
            heart.style.opacity = 0.8;

            const scale = Math.random() * 0.5 + 0.5;
            heart.style.transform = `scale(${scale}) rotate(45deg)`;
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, duration * 1000);
        }
        setInterval(createHeart, 500);


        document.addEventListener("DOMContentLoaded", function () {
        const musicTrigger = document.getElementById("play-music");
        const audio = document.getElementById("birthday-audio");

        musicTrigger.addEventListener("click", function () {
            // Debug log
            console.log("B·∫°n ƒë√£ click ƒë·ªÉ ph√°t nh·∫°c");

            // Reset n·∫øu ƒëang ph√°t
            if (!audio.paused) {
                audio.pause();
                audio.currentTime = 0;
            }

            audio.play().then(() => {
                console.log("‚úÖ Nh·∫°c ƒë√£ ph√°t th√†nh c√¥ng");
            }).catch(err => {
                console.warn("‚ùå Kh√¥ng th·ªÉ ph√°t nh·∫°c:", err);
                alert("Vui l√≤ng ƒë·∫£m b·∫£o b·∫°n ƒë√£ t∆∞∆°ng t√°c v·ªõi trang tr∆∞·ªõc khi ph√°t nh·∫°c.");
            });
        });
    });

    document.addEventListener("DOMContentLoaded", function () {
        const audio = document.getElementById("birthday-audio");
        const playButton = document.getElementById("play-music-btn");

        playButton.addEventListener("click", function () {
            // Y√™u c·∫ßu ng∆∞·ªùi d√πng ƒë√£ t∆∞∆°ng t√°c, n√™n click n√†y s·∫Ω h·ª£p l·ªá
            audio.play().catch(error => {
                console.error("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", error);
            });
        });
    });

    </script>

</body>
</html>
